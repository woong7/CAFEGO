{% extends 'base.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/rank_list.css' %}">
{% endblock %}
{% block title %}
    ë­í‚¹ë¦¬ìŠ¤íŠ¸
{% endblock %}

{% block content %}
  <section id="rank_page" class="p-4">
    <header class="pt-5">
        <div class="pricing-header p-2 pb-md-4 mx-auto text-center">
            <h1 class="display-4 fw-normal page_title">Ranking</h1>
            <p class="fs-5 text-muted page_info">ë­í‚¹ ì‚°ì • ê¸°ê°„<br>{{last_month_first}} ~ {{last_month_last}}</p>
        </div>
    </header>

    <div class="container px-5">
      <article class="row row-cols-lg-2 row-cols-md-1 row-cols-sm-1 mb-3 text-center">

      <!----- A_ì´ ë°©ë¬¸ ë­í‚¹ ----->
      <section class="col">
        <div class="card rounded-5 shadow mx-2 my-3">
          <div class="row g-0">
            <div class="col-md-8">
              <img src="../../../media/static/image/rank_coffee.jpg" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-4">
              <div class="card-body">
                <div class="card-img-overlay card_title col-md-8" style="height: 50px;">
                  <span class="ranking_title_back"></span>
                  <span class="ranking_title">ì „ì²´ ì¹´í˜ ë°©ë¬¸ ë­í‚¹</span>
                </div>
                <div>
                  {% if A_my_grade == 1 %}
                    <i class="my-2 fas fa-medal gold_medal"></i>
                  {% elif A_my_grade == 2 %}
                    <i class="my-2 fas fa-medal silver_medal"></i>
                  {% elif A_my_grade == 3 %}
                    <i class="my-2 fas fa-medal bronze_medal"></i>
                  {% else %}
                    <i class="my-2 fas fa-coffee other_medal"></i>
                  {% endif%}

                  <div class="card-text card_info my-3">
                    í˜„ì¬ {{ request.user.nickname }}ë‹˜ì€<br>
                    {% if A_my_grade == 0 %}
                      ì•„ì§ ë°©ë¬¸í•œ ì¹´í˜ê°€ ì—†ì–´ìš”!
                    {% else %}
                      ğŸŒŸ{{ A_my_grade }}ë“±ğŸŒŸ ì…ë‹ˆë‹¤!
                    {% endif%}
                  </div>
                  
                  <!-- A_Button trigger modal -->
                  <button class="button" data-bs-toggle="modal" data-bs-target="#A_Modal">
                    ì „ì²´ ë­í‚¹
                  </button>
                  <!-- A_Modal -->
                  <div class="modal fade" id="A_Modal" tabindex="-1" aria-labelledby="A_ModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="A_ModalLabel">ì¹´í˜ ì´ ë°©ë¬¸ íšŸìˆ˜</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                        {% for user in A_users %}
                          {% if forloop.counter == 1 %}
                              <p>1ë“±: {{ user.nickname}} ë‹˜!  [ ì´ ë°©ë¬¸ íšŸìˆ˜: {{ user.total_visit }} ] </p>
                          {% else %}
                              <p>{{forloop.counter}}ë“±: {{ user.nickname}} ë‹˜!  [ ì´ ë°©ë¬¸ íšŸìˆ˜: {{ user.total_visit }} ] </p>
                          {% endif %}
                        {% endfor %}
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!----- B_í•œ ë‹¬ ë°©ë¬¸ ë­í‚¹ ----->
      <section class="col">
        <div class="card rounded-5 shadow mx-2 my-3">
          <div class="row g-0">
            <div class="col-md-8">
              <img src="../../../media/static/image/rank_coffee-beans.jpg" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-4">
              <div class="card-body">
                <div class="card-img-overlay card_title col-md-8" style="height: 50px;">
                  <span class="ranking_title_back"></span>
                  <span class="ranking_title">8ì›”! ì¹´í˜ ë°©ë¬¸ ë­í‚¹</span>
                </div>
                <div>
                  {% if B_my_grade == 1 %}
                    <i class="my-2 fas fa-medal gold_medal"></i>
                  {% elif B_my_grade == 2 %}
                    <i class="my-2 fas fa-medal silver_medal"></i>
                  {% elif B_my_grade == 3 %}
                    <i class="my-2 fas fa-medal bronze_medal"></i>
                  {% else %}
                    <i class="my-2 fas fa-coffee other_medal"></i>
                  {% endif%}

                  <div class="card-text card_info my-3">
                    í˜„ì¬ {{ request.user.nickname }}ë‹˜ì€<br>
                    {% if B_my_grade == 0 %}
                      ì´ë²ˆ ë‹¬ì— ë°©ë¬¸í•œ ì¹´í˜ê°€ ì—†ì–´ìš”!
                    {% else %}
                      ğŸŒŸ{{ B_my_grade }}ë“±ğŸŒŸ ì…ë‹ˆë‹¤!
                    {% endif%}
                  </div>
                  
                  <!-- B_Button trigger modal -->
                  <button class="button" data-bs-toggle="modal" data-bs-target="#B_Modal">
                    ì „ì²´ ë­í‚¹
                  </button>
                  <!-- B_Modal -->
                  <div class="modal fade" id="B_Modal" tabindex="-1" aria-labelledby="B_ModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="B_ModalLabel">8ì›” ì¹´í˜ ì´ ë°©ë¬¸ íšŸìˆ˜</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          {% for user in B_users %}
                            {% if forloop.counter == 1 %}
                                <p>1ë“±: {{ user.nickname}} ë‹˜!  [ ì´ ë°©ë¬¸ íšŸìˆ˜: {{ user.visit_count_lastmonth }} ] </p>
                            {% else %}
                                <p>{{forloop.counter}}ë“±: {{ user.nickname}} ë‹˜!  [ ì´ ë°©ë¬¸ íšŸìˆ˜: {{ user.visit_count_lastmonth }} ] </p>
                            {% endif %}
                          {% endfor %}
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!----- C_í•œë‹¬ ì¹´í˜ ì¢…ë¥˜ ë­í‚¹ ----->
      <section class="col">
        <div class="card rounded-5 shadow mx-2 my-3">
          <div class="row g-0">
            <div class="col-md-8">
              <img src="../../../media/static/image/rank_coffee-beans.jpg" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-4">
              <div class="card-body">
                <div class="card-img-overlay card_title col-md-8" style="height: 50px;">
                  <span class="ranking_title_back"></span>
                  <span class="ranking_title">ë°©ë¬¸ ì¹´í˜ ì¢…ë¥˜ ë­í‚¹</span>
                </div>
                <div>
                  {% if C_my_grade == 1 %}
                    <i class="my-2 fas fa-medal gold_medal"></i>
                  {% elif C_my_grade == 2 %}
                    <i class="my-2 fas fa-medal silver_medal"></i>
                  {% elif C_my_grade == 3 %}
                    <i class="my-2 fas fa-medal bronze_medal"></i>
                  {% else %}
                    <i class="my-2 fas fa-coffee other_medal"></i>
                  {% endif%}

                  <div class="card-text card_info my-3">í˜„ì¬ {{ request.user.nickname }}ë‹˜ì€<br>ğŸŒŸ{{ C_my_grade }}ë“±ğŸŒŸ ì…ë‹ˆë‹¤!</div>
                  
                  <!-- C_Button trigger modal -->
                  <button class="button" data-bs-toggle="modal" data-bs-target="#C_Modal">
                    ì „ì²´ ë­í‚¹
                  </button>
                  <!-- C_Modal -->
                  <div class="modal fade" id="C_Modal" tabindex="-1" aria-labelledby="C_ModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="C_ModalLabel">8ì›” ë°©ë¬¸í•œ ì¹´í˜ ê°€ì§“ìˆ˜</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          {% for key, value in C_monthly_kinds_order.items %}
                            {% if forloop.counter == 1 %}
                                <p>1ë“±: {{ key }} ë‹˜! [ ì´ë²ˆ ë‹¬  ë°©ë¬¸ ì¹´í˜ ì¢…ë¥˜: {{ value }} ]</p>  
                            {% else %}
                                <p>{{ forloop.counter }}ë“±: {{ key }} ë‹˜!  [ ì´ë²ˆ ë‹¬  ë°©ë¬¸ ì¹´í˜ ì¢…ë¥˜: {{ value }} ] </p>
                            {% endif %}
                        {% endfor %}
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!----- D_ëˆ„ì  ë¦¬ë·° ê°œìˆ˜ ë­í‚¹ ----->
      <section class="col">
        <div class="card rounded-5 shadow mx-2 my-3">
          <div class="row g-0">
            <div class="col-md-8">
              <img src="../../../media/static/image/rank_coffee-beans.jpg" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-4">
              <div class="card-body">
                <div class="card-img-overlay card_title col-md-8" style="height: 50px;">
                  <span class="ranking_title_back"></span>
                  <span class="ranking_title">ì „ì²´ ë¦¬ë·° ê°œìˆ˜ ë­í‚¹</span>
                </div>
                <div>
                  {% if D_my_grade == 1 %}
                    <i class="my-2 fas fa-medal gold_medal"></i>
                  {% elif D_my_grade == 2 %}
                    <i class="my-2 fas fa-medal silver_medal"></i>
                  {% elif D_my_grade == 3 %}
                    <i class="my-2 fas fa-medal bronze_medal"></i>
                  {% else %}
                    <i class="my-2 fas fa-coffee other_medal"></i>
                  {% endif%}

                  <div class="card-text card_info my-3">í˜„ì¬ {{ request.user.nickname }}ë‹˜ì€<br>ğŸŒŸ{{ D_my_grade }}ë“±ğŸŒŸ ì…ë‹ˆë‹¤!</div>
                  
                  <!-- D_Button trigger modal -->
                  <button class="button" data-bs-toggle="modal" data-bs-target="#D_Modal">
                    ì „ì²´ ë­í‚¹
                  </button>
                  <!-- D_Modal -->
                  <div class="modal fade" id="D_Modal" tabindex="-1" aria-labelledby="D_ModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="D_ModalLabel">ì „ì²´ ë¦¬ë·° ê°œìˆ˜</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          {% for user in D_all_review_order %}
                            {% if forloop.counter == 1 %}
                                <p>1ë“±: {{ user.nickname }} ë‹˜! [ ì´ ë¦¬ë·° ê°œìˆ˜: {{ user.total_review }} ]</p>  
                            {% else %}
                                <p>{{ forloop.counter }}ë“±: {{ user.nickname }} ë‹˜!  [ ì´ ë¦¬ë·° ê°œìˆ˜: {{ user.total_review }} ] </p>
                            {% endif %}
                        {% endfor %}
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!----- E_í•œ ë‹¬ ë¦¬ë·° ê°œìˆ˜ ë­í‚¹ ----->
      <section class="col">
        <div class="card rounded-5 shadow mx-2 my-3">
          <div class="row g-0">
            <div class="col-md-8">
              <img src="../../../media/static/image/rank_coffee-beans.jpg" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-4">
              <div class="card-body">
                <div class="card-img-overlay card_title col-md-8" style="height: 50px;">
                  <span class="ranking_title_back"></span>
                  <span class="ranking_title">8ì›” ë¦¬ë·° ê°œìˆ˜ ë­í‚¹</span>
                </div>
                <div>
                  {% if E_my_grade == 1 %}
                    <i class="my-2 fas fa-medal gold_medal"></i>
                  {% elif E_my_grade == 2 %}
                    <i class="my-2 fas fa-medal silver_medal"></i>
                  {% elif E_my_grade == 3 %}
                    <i class="my-2 fas fa-medal bronze_medal"></i>
                  {% else %}
                    <i class="my-2 fas fa-coffee other_medal"></i>
                  {% endif%}

                  <div class="card-text card_info my-3">8ì›”! {{ request.user.nickname }}ë‹˜ì€<br>ğŸŒŸ{{ E_my_grade }}ë“±ğŸŒŸ ì…ë‹ˆë‹¤!</div>
                  
                  <!-- E_Button trigger modal -->
                  <button class="button" data-bs-toggle="modal" data-bs-target="#E_Modal">
                    ì „ì²´ ë­í‚¹
                  </button>
                  <!-- E_Modal -->
                  <div class="modal fade" id="E_Modal" tabindex="-1" aria-labelledby="E_ModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="E_ModalLabel">8ì›” ë¦¬ë·° ê°œìˆ˜</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          {% for user in E_month_review_order %}
                            {% if forloop.counter == 1 %}
                                <p>1ë“±: {{ user.nickname }} ë‹˜! [ ì´ ë¦¬ë·° ê°œìˆ˜: {{ user.review_count_lastmonth }} ]</p>  
                            {% else %}
                                <p>{{ forloop.counter }}ë“±: {{ user.nickname }} ë‹˜!  [ ì´ ë¦¬ë·° ê°œìˆ˜: {{ user.review_count_lastmonth }} ] </p>
                            {% endif %}
                          {% endfor %}
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      </article>
    </div>
  </section>
{% endblock %}

